{"remainingRequest":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jesuskostov/Desktop/willUse/project-manager/src/views/Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jesuskostov/Desktop/willUse/project-manager/src/views/Register.vue","mtime":1610277713604},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGZiIH0gZnJvbSAnLi4vZmlyZWJhc2UnCmltcG9ydCBBeGlvcyBmcm9tICdheGlvcycKCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHNlY29uZF9zdGVwOiBmYWxzZSwKICAgICAgaW1hZ2VfbG9hZDogZmFsc2UsCiAgICAgIGltYWdlOiAnJywKICAgICAgcmVnaXN0ZXJfaW5mbzogewogICAgICAgIHVzZXJJRDogJycsCiAgICAgICAgbmFtZTogJycsCiAgICAgICAgbGFzdF9uYW1lOiAnJywKICAgICAgICBlbWFpbDogJycsCiAgICAgICAgcGFzc3dvcmQ6ICcnCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHJlZ2lzdGVyKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlCiAgICAgIGNvbnN0IHJlZ2lzdHJhdGlvbiA9IGF3YWl0IGZiLmF1dGgoKS5jcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQodGhpcy5yZWdpc3Rlcl9pbmZvLmVtYWlsLCB0aGlzLnJlZ2lzdGVyX2luZm8ucGFzc3dvcmQpCiAgICAgIGxldCB1c2VySUQgPSByZWdpc3RyYXRpb24udXNlci51aWQKICAgICAgdGhpcy51c2VySUQgPSB1c2VySUQKICAgICAgCiAgICAgIGF3YWl0IEF4aW9zLnB1dChgaHR0cHM6Ly9tYW5hZ2VyLTQ3ZTYxLWRlZmF1bHQtcnRkYi5maXJlYmFzZWlvLmNvbS91c2Vycy8ke3VzZXJJRH0uanNvbmAsIHsKICAgICAgICBuYW1lOiB0aGlzLnJlZ2lzdGVyX2luZm8ubmFtZSwKICAgICAgICBsYXN0X25hbWU6IHRoaXMucmVnaXN0ZXJfaW5mby5sYXN0X25hbWUKICAgICAgfSkKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2UKICAgICAgdGhpcy5zZWNvbmRfc3RlcCA9IHRydWUKICAgIH0sCiAgICBvblBpY2tGaWxlKCkgewogICAgICB0aGlzLiRyZWZzLmZpbGVJbnB1dC5jbGljaygpOwogICAgfSwKICAgIHVwbG9hZFBob3RvKGUpIHsKICAgICAgdGhpcy5pbWFnZV9sb2FkID0gdHJ1ZQogICAgICBsZXQgaW1hZ2UgPSBlLnRhcmdldC5maWxlc1swXTsKICAgICAgbGV0IHN0b3JhZ2VSZWYgPSBmYi5zdG9yYWdlKCkucmVmKCJhdmF0YXIvIiArIGltYWdlLm5hbWUpOwogICAgICBsZXQgdXBsb2FkSW1hZ2UgPSBzdG9yYWdlUmVmLnB1dChpbWFnZSk7CiAgICAgIHVwbG9hZEltYWdlLm9uKAogICAgICAgICJzdGF0ZV9jaGFuZ2VkIiwKICAgICAgICAoKSA9PiB7fSwKICAgICAgICAoKSA9PiB7CiAgICAgICAgICAvLyBIYW5kbGUgdW5zdWNjZXNzZnVsIHVwbG9hZHMKICAgICAgICB9LAogICAgICAgICgpID0+IHsKICAgICAgICAgIC8vIEhhbmRsZSBzdWNjZXNzZnVsIHVwbG9hZHMgb24gY29tcGxldGUKICAgICAgICAgIHVwbG9hZEltYWdlLnNuYXBzaG90LnJlZi5nZXREb3dubG9hZFVSTCgpLnRoZW4oZG93bmxvYWRVUkwgPT4gewogICAgICAgICAgICB0aGlzLmltYWdlID0gZG93bmxvYWRVUkw7CiAgICAgICAgICAgIHRoaXMuaW1hZ2VfbG9hZCA9IGZhbHNlCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICk7CiAgICB9LAogICAgYXN5bmMgc2F2ZUltZygpIHsKICAgICAgYXdhaXQgQXhpb3MucHV0KGBodHRwczovL21hbmFnZXItNDdlNjEtZGVmYXVsdC1ydGRiLmZpcmViYXNlaW8uY29tL3VzZXJzLyR7dGhpcy51c2VySUR9Lmpzb25gLCB7CiAgICAgICAgbmFtZTogdGhpcy5yZWdpc3Rlcl9pbmZvLm5hbWUsCiAgICAgICAgbGFzdF9uYW1lOiB0aGlzLnJlZ2lzdGVyX2luZm8ubGFzdF9uYW1lLAogICAgICAgIGltYWdlOiB0aGlzLmltYWdlCiAgICAgIH0pCiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJykKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICAKICAgIC8vIGZiLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQoIHVzZXIgPT4gewogICAgLy8gICBpZiAodXNlcikgewogICAgLy8gICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJykKICAgIC8vICAgfQogICAgLy8gfSkKICB9Cn0K"},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Register.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <section class=\"section\">\n      <div class=\"container mt-5\">\n        <div class=\"row\">\n          <div class=\"col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-8 offset-lg-2 col-xl-8 offset-xl-2\">\n            <div v-if=\"!loading && !second_step\" class=\"card card-primary\">\n              <div class=\"card-header\"><h4>Register</h4></div>\n              <div class=\"card-body\">\n                <form @submit.prevent=\"register\">\n                  <div class=\"row\">\n                    <div class=\"form-group col-6\">\n                      <label for=\"first_name\">First Name</label>\n                      <input type=\"text\" class=\"form-control\" v-model=\"register_info.name\" autofocus required>\n                    </div>\n                    <div class=\"form-group col-6\">\n                      <label for=\"last_name\">Last Name</label>\n                      <input type=\"text\" class=\"form-control\" v-model=\"register_info.last_name\" required>\n                    </div>\n                  </div>\n\n                  <div class=\"row\">\n                    <div class=\"form-group col-6\">\n                      <label for=\"email\">Email</label>\n                      <input type=\"email\" class=\"form-control\" v-model=\"register_info.email\" required>\n                    </div>\n                    <div class=\"form-group col-6\">\n                      <label for=\"password\">Password</label>\n                      <input type=\"password\" class=\"form-control pwstrength\" v-model=\"register_info.password\" required>\n                    </div>\n                  </div>\n\n                  <div class=\"form-group text-center\">\n                    <button type=\"submit\" class=\"btn btn-primary btn-lg btn-block\">\n                      Register\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n\n            <img v-if=\"loading\" class=\"loading\" src=\"../assets/loading.gif\" alt=\"loader\">\n\n            <div v-if=\"second_step\" class=\"card\">\n              <div class=\"card-body\">\n                <div class=\"empty-state\" data-height=\"400\">\n                  <div class=\"author-box card-primary\">\n                    <div class=\"card-body\">\n                      <div class=\"avatar-box\">\n                        <img v-if=\"image_load\" class=\"loading-avatar\" src=\"../assets/loading.gif\" alt=\"loader\">\n                        <img v-if=\"!image\" alt=\"image\" src=\"../assets/img/avatar/avatar-1.png\" class=\"avatar placeholder\">\n                        <img v-if=\"image\" alt=\"image\" :src=\"image\" class=\"avatar\">\n                      </div>\n                    </div>\n                  </div>\n                  <h2>Upload your avatar</h2>\n                  <input type=\"file\" style=\"display: none\" ref=\"fileInput\" @change=\"uploadPhoto\" />\n                  <div class=\"flex-row\">\n                    <button @click.prevent=\"onPickFile\" class=\"btn btn-primary mt-4\" :class=\"{'mr-3': image}\">Upload</button>\n                    <button v-if=\"image\" class=\"btn btn-primary mt-4\" @click=\"saveImg\">Forward</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"simple-footer\">\n              Copyright &copy; ProjectManager - Jesus Kostov 2020\n            </div>\n          </div>\n          <div class=\"col-12 col-md-6 col-sm-12\">\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport { fb } from '../firebase'\nimport Axios from 'axios'\n\nexport default {\n  data() {\n    return {\n      loading: false,\n      second_step: false,\n      image_load: false,\n      image: '',\n      register_info: {\n        userID: '',\n        name: '',\n        last_name: '',\n        email: '',\n        password: ''\n      }\n    }\n  },\n  methods: {\n    async register() {\n      this.loading = true\n      const registration = await fb.auth().createUserWithEmailAndPassword(this.register_info.email, this.register_info.password)\n      let userID = registration.user.uid\n      this.userID = userID\n      \n      await Axios.put(`https://manager-47e61-default-rtdb.firebaseio.com/users/${userID}.json`, {\n        name: this.register_info.name,\n        last_name: this.register_info.last_name\n      })\n      this.loading = false\n      this.second_step = true\n    },\n    onPickFile() {\n      this.$refs.fileInput.click();\n    },\n    uploadPhoto(e) {\n      this.image_load = true\n      let image = e.target.files[0];\n      let storageRef = fb.storage().ref(\"avatar/\" + image.name);\n      let uploadImage = storageRef.put(image);\n      uploadImage.on(\n        \"state_changed\",\n        () => {},\n        () => {\n          // Handle unsuccessful uploads\n        },\n        () => {\n          // Handle successful uploads on complete\n          uploadImage.snapshot.ref.getDownloadURL().then(downloadURL => {\n            this.image = downloadURL;\n            this.image_load = false\n          });\n        }\n      );\n    },\n    async saveImg() {\n      await Axios.put(`https://manager-47e61-default-rtdb.firebaseio.com/users/${this.userID}.json`, {\n        name: this.register_info.name,\n        last_name: this.register_info.last_name,\n        image: this.image\n      })\n      this.$router.push('/')\n    }\n  },\n  created() {\n    \n    // fb.auth().onAuthStateChanged( user => {\n    //   if (user) {\n    //     this.$router.push('/')\n    //   }\n    // })\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.loading-avatar {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 140%;\n  z-index: 123123;\n  transform: translate(-50%, -50%);\n}\n\n.avatar-box {\n  position: relative;\n  width: 100px;\n  height: 100px;\n  border-radius: 99999999px;\n  overflow: hidden;\n}\n\n.avatar {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.loading {\n  width: 40px;\n  height: 40px;\n}\n\n.form-group {\n  text-align: left;\n}\n\n\n</style>"]}]}