{"remainingRequest":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jesuskostov/Desktop/willUse/project-manager/src/views/Register.vue?vue&type=style&index=0&lang=scss&","dependencies":[{"path":"/home/jesuskostov/Desktop/willUse/project-manager/src/views/Register.vue","mtime":1610277713604},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubG9hZGluZy1hdmF0YXIgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICB0b3A6IDUwJTsKICBsZWZ0OiA1MCU7CiAgd2lkdGg6IDE0MCU7CiAgei1pbmRleDogMTIzMTIzOwogIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwp9CgouYXZhdGFyLWJveCB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHdpZHRoOiAxMDBweDsKICBoZWlnaHQ6IDEwMHB4OwogIGJvcmRlci1yYWRpdXM6IDk5OTk5OTk5cHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoKLmF2YXRhciB7CiAgd2lkdGg6IDEwMCU7CiAgaGVpZ2h0OiAxMDAlOwogIG9iamVjdC1maXQ6IGNvdmVyOwp9CgoubG9hZGluZyB7CiAgd2lkdGg6IDQwcHg7CiAgaGVpZ2h0OiA0MHB4Owp9CgouZm9ybS1ncm91cCB7CiAgdGV4dC1hbGlnbjogbGVmdDsKfQoKCg=="},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Register.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <section class=\"section\">\n      <div class=\"container mt-5\">\n        <div class=\"row\">\n          <div class=\"col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-8 offset-lg-2 col-xl-8 offset-xl-2\">\n            <div v-if=\"!loading && !second_step\" class=\"card card-primary\">\n              <div class=\"card-header\"><h4>Register</h4></div>\n              <div class=\"card-body\">\n                <form @submit.prevent=\"register\">\n                  <div class=\"row\">\n                    <div class=\"form-group col-6\">\n                      <label for=\"first_name\">First Name</label>\n                      <input type=\"text\" class=\"form-control\" v-model=\"register_info.name\" autofocus required>\n                    </div>\n                    <div class=\"form-group col-6\">\n                      <label for=\"last_name\">Last Name</label>\n                      <input type=\"text\" class=\"form-control\" v-model=\"register_info.last_name\" required>\n                    </div>\n                  </div>\n\n                  <div class=\"row\">\n                    <div class=\"form-group col-6\">\n                      <label for=\"email\">Email</label>\n                      <input type=\"email\" class=\"form-control\" v-model=\"register_info.email\" required>\n                    </div>\n                    <div class=\"form-group col-6\">\n                      <label for=\"password\">Password</label>\n                      <input type=\"password\" class=\"form-control pwstrength\" v-model=\"register_info.password\" required>\n                    </div>\n                  </div>\n\n                  <div class=\"form-group text-center\">\n                    <button type=\"submit\" class=\"btn btn-primary btn-lg btn-block\">\n                      Register\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n\n            <img v-if=\"loading\" class=\"loading\" src=\"../assets/loading.gif\" alt=\"loader\">\n\n            <div v-if=\"second_step\" class=\"card\">\n              <div class=\"card-body\">\n                <div class=\"empty-state\" data-height=\"400\">\n                  <div class=\"author-box card-primary\">\n                    <div class=\"card-body\">\n                      <div class=\"avatar-box\">\n                        <img v-if=\"image_load\" class=\"loading-avatar\" src=\"../assets/loading.gif\" alt=\"loader\">\n                        <img v-if=\"!image\" alt=\"image\" src=\"../assets/img/avatar/avatar-1.png\" class=\"avatar placeholder\">\n                        <img v-if=\"image\" alt=\"image\" :src=\"image\" class=\"avatar\">\n                      </div>\n                    </div>\n                  </div>\n                  <h2>Upload your avatar</h2>\n                  <input type=\"file\" style=\"display: none\" ref=\"fileInput\" @change=\"uploadPhoto\" />\n                  <div class=\"flex-row\">\n                    <button @click.prevent=\"onPickFile\" class=\"btn btn-primary mt-4\" :class=\"{'mr-3': image}\">Upload</button>\n                    <button v-if=\"image\" class=\"btn btn-primary mt-4\" @click=\"saveImg\">Forward</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"simple-footer\">\n              Copyright &copy; ProjectManager - Jesus Kostov 2020\n            </div>\n          </div>\n          <div class=\"col-12 col-md-6 col-sm-12\">\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport { fb } from '../firebase'\nimport Axios from 'axios'\n\nexport default {\n  data() {\n    return {\n      loading: false,\n      second_step: false,\n      image_load: false,\n      image: '',\n      register_info: {\n        userID: '',\n        name: '',\n        last_name: '',\n        email: '',\n        password: ''\n      }\n    }\n  },\n  methods: {\n    async register() {\n      this.loading = true\n      const registration = await fb.auth().createUserWithEmailAndPassword(this.register_info.email, this.register_info.password)\n      let userID = registration.user.uid\n      this.userID = userID\n      \n      await Axios.put(`https://manager-47e61-default-rtdb.firebaseio.com/users/${userID}.json`, {\n        name: this.register_info.name,\n        last_name: this.register_info.last_name\n      })\n      this.loading = false\n      this.second_step = true\n    },\n    onPickFile() {\n      this.$refs.fileInput.click();\n    },\n    uploadPhoto(e) {\n      this.image_load = true\n      let image = e.target.files[0];\n      let storageRef = fb.storage().ref(\"avatar/\" + image.name);\n      let uploadImage = storageRef.put(image);\n      uploadImage.on(\n        \"state_changed\",\n        () => {},\n        () => {\n          // Handle unsuccessful uploads\n        },\n        () => {\n          // Handle successful uploads on complete\n          uploadImage.snapshot.ref.getDownloadURL().then(downloadURL => {\n            this.image = downloadURL;\n            this.image_load = false\n          });\n        }\n      );\n    },\n    async saveImg() {\n      await Axios.put(`https://manager-47e61-default-rtdb.firebaseio.com/users/${this.userID}.json`, {\n        name: this.register_info.name,\n        last_name: this.register_info.last_name,\n        image: this.image\n      })\n      this.$router.push('/')\n    }\n  },\n  created() {\n    \n    // fb.auth().onAuthStateChanged( user => {\n    //   if (user) {\n    //     this.$router.push('/')\n    //   }\n    // })\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.loading-avatar {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 140%;\n  z-index: 123123;\n  transform: translate(-50%, -50%);\n}\n\n.avatar-box {\n  position: relative;\n  width: 100px;\n  height: 100px;\n  border-radius: 99999999px;\n  overflow: hidden;\n}\n\n.avatar {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.loading {\n  width: 40px;\n  height: 40px;\n}\n\n.form-group {\n  text-align: left;\n}\n\n\n</style>"]}]}