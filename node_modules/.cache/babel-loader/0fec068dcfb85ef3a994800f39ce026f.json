{"remainingRequest":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/babel-loader/lib/index.js!/home/jesuskostov/Desktop/willUse/project-manager/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/jesuskostov/Desktop/willUse/project-manager/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/jesuskostov/Desktop/willUse/project-manager/src/views/Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/jesuskostov/Desktop/willUse/project-manager/src/views/Register.vue","mtime":1610277713604},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/jesuskostov/Desktop/willUse/project-manager/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2plc3Vza29zdG92L0Rlc2t0b3Avd2lsbFVzZS9wcm9qZWN0LW1hbmFnZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgeyBmYiB9IGZyb20gJy4uL2ZpcmViYXNlJzsKaW1wb3J0IEF4aW9zIGZyb20gJ2F4aW9zJzsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgc2Vjb25kX3N0ZXA6IGZhbHNlLAogICAgICBpbWFnZV9sb2FkOiBmYWxzZSwKICAgICAgaW1hZ2U6ICcnLAogICAgICByZWdpc3Rlcl9pbmZvOiB7CiAgICAgICAgdXNlcklEOiAnJywKICAgICAgICBuYW1lOiAnJywKICAgICAgICBsYXN0X25hbWU6ICcnLAogICAgICAgIGVtYWlsOiAnJywKICAgICAgICBwYXNzd29yZDogJycKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3RlcigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIHJlZ2lzdHJhdGlvbiwgdXNlcklEOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gZmIuYXV0aCgpLmNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChfdGhpcy5yZWdpc3Rlcl9pbmZvLmVtYWlsLCBfdGhpcy5yZWdpc3Rlcl9pbmZvLnBhc3N3b3JkKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVnaXN0cmF0aW9uID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHVzZXJJRCA9IHJlZ2lzdHJhdGlvbi51c2VyLnVpZDsKICAgICAgICAgICAgICAgIF90aGlzLnVzZXJJRCA9IHVzZXJJRDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIEF4aW9zLnB1dCgiaHR0cHM6Ly9tYW5hZ2VyLTQ3ZTYxLWRlZmF1bHQtcnRkYi5maXJlYmFzZWlvLmNvbS91c2Vycy8iLmNvbmNhdCh1c2VySUQsICIuanNvbiIpLCB7CiAgICAgICAgICAgICAgICAgIG5hbWU6IF90aGlzLnJlZ2lzdGVyX2luZm8ubmFtZSwKICAgICAgICAgICAgICAgICAgbGFzdF9uYW1lOiBfdGhpcy5yZWdpc3Rlcl9pbmZvLmxhc3RfbmFtZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF90aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgICAgIF90aGlzLnNlY29uZF9zdGVwID0gdHJ1ZTsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBvblBpY2tGaWxlOiBmdW5jdGlvbiBvblBpY2tGaWxlKCkgewogICAgICB0aGlzLiRyZWZzLmZpbGVJbnB1dC5jbGljaygpOwogICAgfSwKICAgIHVwbG9hZFBob3RvOiBmdW5jdGlvbiB1cGxvYWRQaG90byhlKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5pbWFnZV9sb2FkID0gdHJ1ZTsKICAgICAgdmFyIGltYWdlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgIHZhciBzdG9yYWdlUmVmID0gZmIuc3RvcmFnZSgpLnJlZigiYXZhdGFyLyIgKyBpbWFnZS5uYW1lKTsKICAgICAgdmFyIHVwbG9hZEltYWdlID0gc3RvcmFnZVJlZi5wdXQoaW1hZ2UpOwogICAgICB1cGxvYWRJbWFnZS5vbigic3RhdGVfY2hhbmdlZCIsIGZ1bmN0aW9uICgpIHt9LCBmdW5jdGlvbiAoKSB7Ly8gSGFuZGxlIHVuc3VjY2Vzc2Z1bCB1cGxvYWRzCiAgICAgIH0sIGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBIYW5kbGUgc3VjY2Vzc2Z1bCB1cGxvYWRzIG9uIGNvbXBsZXRlCiAgICAgICAgdXBsb2FkSW1hZ2Uuc25hcHNob3QucmVmLmdldERvd25sb2FkVVJMKCkudGhlbihmdW5jdGlvbiAoZG93bmxvYWRVUkwpIHsKICAgICAgICAgIF90aGlzMi5pbWFnZSA9IGRvd25sb2FkVVJMOwogICAgICAgICAgX3RoaXMyLmltYWdlX2xvYWQgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgc2F2ZUltZzogZnVuY3Rpb24gc2F2ZUltZygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CgogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIEF4aW9zLnB1dCgiaHR0cHM6Ly9tYW5hZ2VyLTQ3ZTYxLWRlZmF1bHQtcnRkYi5maXJlYmFzZWlvLmNvbS91c2Vycy8iLmNvbmNhdChfdGhpczMudXNlcklELCAiLmpzb24iKSwgewogICAgICAgICAgICAgICAgICBuYW1lOiBfdGhpczMucmVnaXN0ZXJfaW5mby5uYW1lLAogICAgICAgICAgICAgICAgICBsYXN0X25hbWU6IF90aGlzMy5yZWdpc3Rlcl9pbmZvLmxhc3RfbmFtZSwKICAgICAgICAgICAgICAgICAgaW1hZ2U6IF90aGlzMy5pbWFnZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF90aGlzMy4kcm91dGVyLnB1c2goJy8nKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgey8vIGZiLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQoIHVzZXIgPT4gewogICAgLy8gICBpZiAodXNlcikgewogICAgLy8gICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJykKICAgIC8vICAgfQogICAgLy8gfSkKICB9Cn07"},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA,SAAA,EAAA,QAAA,aAAA;AACA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,WAAA,EAAA,KAFA;AAGA,MAAA,UAAA,EAAA,KAHA;AAIA,MAAA,KAAA,EAAA,EAJA;AAKA,MAAA,aAAA,EAAA;AACA,QAAA,MAAA,EAAA,EADA;AAEA,QAAA,IAAA,EAAA,EAFA;AAGA,QAAA,SAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA,EAJA;AAKA,QAAA,QAAA,EAAA;AALA;AALA,KAAA;AAaA,GAfA;AAgBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,KAAA,CAAA,OAAA,GAAA,IAAA;AADA;AAAA,uBAEA,EAAA,CAAA,IAAA,GAAA,8BAAA,CAAA,KAAA,CAAA,aAAA,CAAA,KAAA,EAAA,KAAA,CAAA,aAAA,CAAA,QAAA,CAFA;;AAAA;AAEA,gBAAA,YAFA;AAGA,gBAAA,MAHA,GAGA,YAAA,CAAA,IAAA,CAAA,GAHA;AAIA,gBAAA,KAAA,CAAA,MAAA,GAAA,MAAA;AAJA;AAAA,uBAMA,KAAA,CAAA,GAAA,mEAAA,MAAA,YAAA;AACA,kBAAA,IAAA,EAAA,KAAA,CAAA,aAAA,CAAA,IADA;AAEA,kBAAA,SAAA,EAAA,KAAA,CAAA,aAAA,CAAA;AAFA,iBAAA,CANA;;AAAA;AAUA,gBAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,gBAAA,KAAA,CAAA,WAAA,GAAA,IAAA;;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYA,KAbA;AAcA,IAAA,UAdA,wBAcA;AACA,WAAA,KAAA,CAAA,SAAA,CAAA,KAAA;AACA,KAhBA;AAiBA,IAAA,WAjBA,uBAiBA,CAjBA,EAiBA;AAAA;;AACA,WAAA,UAAA,GAAA,IAAA;AACA,UAAA,KAAA,GAAA,CAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,UAAA,UAAA,GAAA,EAAA,CAAA,OAAA,GAAA,GAAA,CAAA,YAAA,KAAA,CAAA,IAAA,CAAA;AACA,UAAA,WAAA,GAAA,UAAA,CAAA,GAAA,CAAA,KAAA,CAAA;AACA,MAAA,WAAA,CAAA,EAAA,CACA,eADA,EAEA,YAAA,CAAA,CAFA,EAGA,YAAA,CACA;AACA,OALA,EAMA,YAAA;AACA;AACA,QAAA,WAAA,CAAA,QAAA,CAAA,GAAA,CAAA,cAAA,GAAA,IAAA,CAAA,UAAA,WAAA,EAAA;AACA,UAAA,MAAA,CAAA,KAAA,GAAA,WAAA;AACA,UAAA,MAAA,CAAA,UAAA,GAAA,KAAA;AACA,SAHA;AAIA,OAZA;AAcA,KApCA;AAqCA,IAAA,OArCA,qBAqCA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACA,KAAA,CAAA,GAAA,mEAAA,MAAA,CAAA,MAAA,YAAA;AACA,kBAAA,IAAA,EAAA,MAAA,CAAA,aAAA,CAAA,IADA;AAEA,kBAAA,SAAA,EAAA,MAAA,CAAA,aAAA,CAAA,SAFA;AAGA,kBAAA,KAAA,EAAA,MAAA,CAAA;AAHA,iBAAA,CADA;;AAAA;AAMA,gBAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,GAAA;;AANA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AA5CA,GAhBA;AA8DA,EAAA,OA9DA,qBA8DA,CAEA;AACA;AACA;AACA;AACA;AACA;AArEA,CAAA","sourcesContent":["<template>\n  <div>\n    <section class=\"section\">\n      <div class=\"container mt-5\">\n        <div class=\"row\">\n          <div class=\"col-12 col-sm-10 offset-sm-1 col-md-8 offset-md-2 col-lg-8 offset-lg-2 col-xl-8 offset-xl-2\">\n            <div v-if=\"!loading && !second_step\" class=\"card card-primary\">\n              <div class=\"card-header\"><h4>Register</h4></div>\n              <div class=\"card-body\">\n                <form @submit.prevent=\"register\">\n                  <div class=\"row\">\n                    <div class=\"form-group col-6\">\n                      <label for=\"first_name\">First Name</label>\n                      <input type=\"text\" class=\"form-control\" v-model=\"register_info.name\" autofocus required>\n                    </div>\n                    <div class=\"form-group col-6\">\n                      <label for=\"last_name\">Last Name</label>\n                      <input type=\"text\" class=\"form-control\" v-model=\"register_info.last_name\" required>\n                    </div>\n                  </div>\n\n                  <div class=\"row\">\n                    <div class=\"form-group col-6\">\n                      <label for=\"email\">Email</label>\n                      <input type=\"email\" class=\"form-control\" v-model=\"register_info.email\" required>\n                    </div>\n                    <div class=\"form-group col-6\">\n                      <label for=\"password\">Password</label>\n                      <input type=\"password\" class=\"form-control pwstrength\" v-model=\"register_info.password\" required>\n                    </div>\n                  </div>\n\n                  <div class=\"form-group text-center\">\n                    <button type=\"submit\" class=\"btn btn-primary btn-lg btn-block\">\n                      Register\n                    </button>\n                  </div>\n                </form>\n              </div>\n            </div>\n\n            <img v-if=\"loading\" class=\"loading\" src=\"../assets/loading.gif\" alt=\"loader\">\n\n            <div v-if=\"second_step\" class=\"card\">\n              <div class=\"card-body\">\n                <div class=\"empty-state\" data-height=\"400\">\n                  <div class=\"author-box card-primary\">\n                    <div class=\"card-body\">\n                      <div class=\"avatar-box\">\n                        <img v-if=\"image_load\" class=\"loading-avatar\" src=\"../assets/loading.gif\" alt=\"loader\">\n                        <img v-if=\"!image\" alt=\"image\" src=\"../assets/img/avatar/avatar-1.png\" class=\"avatar placeholder\">\n                        <img v-if=\"image\" alt=\"image\" :src=\"image\" class=\"avatar\">\n                      </div>\n                    </div>\n                  </div>\n                  <h2>Upload your avatar</h2>\n                  <input type=\"file\" style=\"display: none\" ref=\"fileInput\" @change=\"uploadPhoto\" />\n                  <div class=\"flex-row\">\n                    <button @click.prevent=\"onPickFile\" class=\"btn btn-primary mt-4\" :class=\"{'mr-3': image}\">Upload</button>\n                    <button v-if=\"image\" class=\"btn btn-primary mt-4\" @click=\"saveImg\">Forward</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div class=\"simple-footer\">\n              Copyright &copy; ProjectManager - Jesus Kostov 2020\n            </div>\n          </div>\n          <div class=\"col-12 col-md-6 col-sm-12\">\n          </div>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script>\nimport { fb } from '../firebase'\nimport Axios from 'axios'\n\nexport default {\n  data() {\n    return {\n      loading: false,\n      second_step: false,\n      image_load: false,\n      image: '',\n      register_info: {\n        userID: '',\n        name: '',\n        last_name: '',\n        email: '',\n        password: ''\n      }\n    }\n  },\n  methods: {\n    async register() {\n      this.loading = true\n      const registration = await fb.auth().createUserWithEmailAndPassword(this.register_info.email, this.register_info.password)\n      let userID = registration.user.uid\n      this.userID = userID\n      \n      await Axios.put(`https://manager-47e61-default-rtdb.firebaseio.com/users/${userID}.json`, {\n        name: this.register_info.name,\n        last_name: this.register_info.last_name\n      })\n      this.loading = false\n      this.second_step = true\n    },\n    onPickFile() {\n      this.$refs.fileInput.click();\n    },\n    uploadPhoto(e) {\n      this.image_load = true\n      let image = e.target.files[0];\n      let storageRef = fb.storage().ref(\"avatar/\" + image.name);\n      let uploadImage = storageRef.put(image);\n      uploadImage.on(\n        \"state_changed\",\n        () => {},\n        () => {\n          // Handle unsuccessful uploads\n        },\n        () => {\n          // Handle successful uploads on complete\n          uploadImage.snapshot.ref.getDownloadURL().then(downloadURL => {\n            this.image = downloadURL;\n            this.image_load = false\n          });\n        }\n      );\n    },\n    async saveImg() {\n      await Axios.put(`https://manager-47e61-default-rtdb.firebaseio.com/users/${this.userID}.json`, {\n        name: this.register_info.name,\n        last_name: this.register_info.last_name,\n        image: this.image\n      })\n      this.$router.push('/')\n    }\n  },\n  created() {\n    \n    // fb.auth().onAuthStateChanged( user => {\n    //   if (user) {\n    //     this.$router.push('/')\n    //   }\n    // })\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.loading-avatar {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 140%;\n  z-index: 123123;\n  transform: translate(-50%, -50%);\n}\n\n.avatar-box {\n  position: relative;\n  width: 100px;\n  height: 100px;\n  border-radius: 99999999px;\n  overflow: hidden;\n}\n\n.avatar {\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n}\n\n.loading {\n  width: 40px;\n  height: 40px;\n}\n\n.form-group {\n  text-align: left;\n}\n\n\n</style>"],"sourceRoot":"src/views"}]}